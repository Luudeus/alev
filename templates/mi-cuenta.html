{% extends "layout.html" %}

{% block title %}
Mi Cuenta
{% endblock %}

{% block main %}
<div class="container mt-3">
    <h2>Mi Cuenta</h2>
    <form id="edit-account-form" method="post">
        <!-- Hidden field for user ID -->
        <input type="hidden" name="user_id" value="{{ user.RUT }}">

        <div class="mb-3">
            <label for="nombre">Nombre:</label>
            <input type="text" class="form-control" id="nombre" name="nombre" value="{{ user.nombre }}" required>
        </div>

        <div class="mb-3">
            <label for="correo">Correo:</label>
            <input type="email" class="form-control" id="correo" name="correo" value="{{ user.correo }}" required>
        </div>

        <div class="mb-3">
            <label for="telefono">Teléfono:</label>
            <input type="text" class="form-control" id="telefono" name="telefono" value="{{ user.telefono }}" required>
        </div>

        <div class="mb-3">
            <label for="direccion">Dirección:</label>
            <input type="text" class="form-control" id="direccion" name="direccion" value="{{ user.direccion }}" required>
        </div>

        <!-- Add more fields as needed -->

        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
            <a href="/" class="btn btn-secondary ms-2">Volver</a>
        </div>
    </form>
</div>

<script>
    var phoneInput = document.getElementById('telefono');

    phoneInput.addEventListener('input', function (e) {
        formatPhoneNumber(e);
    });

    document.addEventListener('DOMContentLoaded', function () {
        // Verificar si el campo no comienza con '+' y agregarlo al principio
        if (!phoneInput.value.startsWith('+')) {
            phoneInput.value = '+' + phoneInput.value;
        }
    });

    function formatPhoneNumber(e) {
        var value = e.target.value.replace(/[^\d+]/g, '');
        if (value.length > 1 && value.charAt(0) !== '+') {
            value = '+' + value.slice(1);
        }
        if (value.length > 12) {
            value = value.slice(0, 12);
        }
        e.target.value = value;
    }
</script>



{% endblock %}
